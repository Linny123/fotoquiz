\documentclass[11pt, oneside]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage{geometry}                		% See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   		% ... or a4paper or a5paper or ... 
%\geometry{landscape}                		% Activate for rotated page geometry
%\usepackage[parfill]{parskip}    		% Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}				% Use pdf, png, jpg, or epsÂ§ with pdflatex; use eps in DVI mode
								% TeX will automatically convert eps --> pdf in pdflatex		
\usepackage{amssymb}
\usepackage{hyperref}
%SetFonts



\title{Web technologies: Report}
%\subtitle{The fotoquiz}
\author{Youssef Boudiba, Thibaut Deweert, Geatan Boey, Linda de Corte }
\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle
\clearpage

\tableofcontents
\clearpage


\section{Introduction}
You may know the game "Geoguessr", where you get a random location of google streetview and you have to guess where you are, and the closer your guess is the more points you get. 
Our game has the same idea of guessing a location on a map. Only in our game everyone can upload a picture with a location and an hint. Other people can then guess where the picture is made. They can guess 3 times, every time they lose 20 points and when they ask for an hint they lose half the points.

\subsection{installation of the project}
\begin{enumerate}
\item Install MongoDB \url{https://www.mongodb.com/download-center?jmp=nav#community} 
\item  Install node.js \url{https://nodejs.org/en/}
\item Install Sails.js \url{http://sailsjs.com/get-started} \\
 npm -g install sails 
\item Start MongoDB service (make sure you point to the database path in the project folder: /data/db) \\ 
mongod --dbpath [Path-to-Project]/data/db
\item Navigate to the project folder and start the Sails.js service
\item The project should be running, visit \url{http://localhost:1337/ }

\end{enumerate}

\section{ the web application architecture}
For this application we chose to use the framework Sails.js. This is a  MVC framework for node.js. 

\begin{itemize}
\item Node.js, an execution environment for event-driven server-siede and networking application
\item front-end: For the front-end we chose to include Angular.js for this, because it is a very popular JavaScript framework, which extends HTML to make it more dynamic.
\item Database:  we chose MongoDB, this is a a very big noSQL database services. We chose to use it because it is flexible and is easy to use.
\end{itemize}

We chose Sails.js framework because it lets us write everything in the same language and takes over some tasks, for example it automatically sets up an API.


\section{Implemented functionalities}
\subsection{User}

\subsubsection{The user}

\subsubsection{registering}

\subsubsection{edit user}

\subsubsection{User profile page}

\subsubsection{quizes on user profile}


\subsection{Quiz}
\subsubsection{ overview page}
\subsubsection{filtering}
Quizzes can be filtered on location. On the top of the quiz overview page a user can fill in a location and press the ?filter? button. Only quizzes that are within a 30 km range of the given location are then displayed on the page.
It works as follows. Upon pressing the ?filter? button the text from the input field gets transformed to coordinates. This is achieved by using the Google Maps Geocoder which can transform addresses to coordinates. This set of coordinates is then compared with every quiz. For each quiz the distance is calculated between the two, if the distance is shorter then 30 km the corresponding quiz is shown. All this happens on the client side.
If the typed in location is not found, an alert message indicates so. To remove the filter, the user can simply press the ?X?.

\subsubsection{creating a quiz}
Creating a new quiz can be done by clicking the ?Add? button on the quiz overview page. On the popup that opens the user can fill in some information about his photo quiz. The user can add a personal touch to the quiz by adding a custom message. Eg: ?Visited this museum during my last vacation?. There?s also the option to provide a hint. The player of the quiz can use this hint if he or she has no clue about the location. (See X.X) The message and hint are optional fields. The middle field can be used for uploading a picture and is mandatory. Currently it only supports jpeg images. We use HTML5 form validation on the client side to comply with this restriction. (See X.X).
After selecting an image and pressing ?next? HTML5 FormData is used to transfer the image file to the server side. The server first reads the exif data from the image and searches for GPS coordinates. The image file is then uploaded to Imgur - an online image host - via the Imgur API. Imgur automatically deletes all exif data, so it is not possible by the players of the game to find the GPS coordinates of die image. When the image is uploaded to Imgur, we save the URL and the delete hash (see X.X) of the image. All this information is stored in the quiz database. \\
On the client side we now get a second popup showing a map with a marker. If the uploaded image included some GPS coordinates then the marker wil be on that position. The user has then the possibility to move the marker to a correct position, if that was not the case yet. If the image had no GPS coordinates in then the user can simply indicate the correct position with the marker. 

\subsubsection{ individual quiz}
\subsubsection{comments}
\subsubsection{search}


\section{the other requirements} % please think of another title 
\subsection{AJAX}

\subsection{HTML 5}
We have used 4 HTML features in our application
\begin{enumerate}
\item GEO-location, we use this one when you are doing a quiz, it will first center the map on your location.
\item local storage, we use this to store the API secret on the users computer. So they will stay logged in.
\item form tags, we have used this when you add a new quiz, for the file upload.
\item %Forgot this one
\end{enumerate}


\subsection{Web service}
\subsubsection{Facebook}
\subsubsection{Imgur}
For storing the all the images used for the quizzes we used Imgur (http://imgur.com). Using there public available API we can send the images. As return we get a JSON object containing information about the uploaded picture. For this project we only use the link, id and deletehash parameters.

\subsection{Google maps}
We have used Google maps on several occasions.
The first place where we use the google-maps API is when we are filtering based on location. The location the user fills in is send to Google. Google than sends back the gps locations of the location that matches closest with what the user filled in. \\

The next place we use the Google maps API is when a user is adding a picture. We first look if a picture has Exif location data in his or her application. If they have we make a google map with a marker in the center of the location. Otherwise we center on the VUB. The user can than move the marker. when they save we ask the Google maps API to give us the location. \\

And finally we use it when people guess the location, we again make a map with an marker, but this one is based on your GEO-location, if you do not want to share it we will use the location of the VUB for the start point. You can then again move the marker to chose the location. When you think you found the location, you save and we will ask the Google Maps API for the location. We will than do a calculation to see if you were close enough. If not you have 3 chances to guess, again by moving the marker. \\


\subsection{Provide data}

\section{conclusion}



%\subsection{}



 
\end{document}  